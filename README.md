# 🎮 4D Battle: Red Planet

> Unity 기반 4D 레일 슈팅 게임 (Rail Shooter)

---

## 🧩 프로젝트 개요 (Project Overview)

**4D배틀 (RedPlanet)** 은 Unity(C#) 기반으로 개발된 레일 슈팅 (Rail Shooter) 게임입니다.
플레이어는 정해진 경로를 따라 이동하며 등장하는 적들을 조준하고 격파하는 형태로 진행됩니다.

게임의 핵심은 **AI 행동 루프를 기반으로 한 자율형 적 시스템 구현**입니다.
각 적은 FSM 구조를 통해 탐색, 엄폐, 공격 등 상황별 행동을 수행합니다.

엄폐물의 종류와 전투 상황에 따라 행동이 변화하는 인식형 AI를 구현하여, 단순 반복 패턴이 아닌 **전략적 전투 흐름**을 연출하였습니다.

본 프로젝트는 3개월간의 팀 프로젝트로 진행되었으며,
저는 **적 AI 스폰, 행동, 공격 로직**을 담당했습니다.
팀원들과 협업하여 **레일 이동 구조, UI, 사운드 시스템을 통합 개발**했습니다.

**제작 기간:** 22.02 ~ 22.04 (3개월, 팀 프로젝트)
**개발 환경:** Unity (C#), Visual Studio
**플랫폼:** PC
**장르:** 4D 레일 슈팅 게임
**역할:** 적 AI 스폰, 행동, 공격 로직 구현

---

## 🎯 주요 기능 (Key Features)

### 🧩 적 스폰 및 행동 로직 (Enemy Spawn & AI Behavior System)

* **혼돈형 스폰 구조 설계**
  다수의 적이 동시에 난입하도록 구성, 난이도·웨이브 조건에 따라 스폰 위치를 동적으로 제어
  
* **행동 루프 기반 AI 설계**
  적은 전투 상황에 따라 다음과 같은 행동 루프를 반복 수행
  탐색(Idle) → 엄폐(Cover) → 공격(Attack) → 피격(Damaged) → 재엄폐(Re-Cover) → 파괴(Death)
* **엄폐물의 종류에 따른 행동 변화 로직 구현**
  · 엄폐물이 없을 때 : 즉시 조준·사격
  · 나무 뒤 엄폐 시 : 나무 뒤로 숨었다가 좌우로 이동하며 사격
  · 드럼통 뒤 엄폐 시 : 앉은 자세에서 조준 후 서서 사격하거나 좌우로 나와 공격
  ※ 상황에 따라 드럼통을 뛰어넘어 플레이어에게 접근하는 행동 수행
* **상황(피격 여부, 플레이어 위치)에 따른 행동 분기**
* **엄폐 이동 시 경로 탐색 및 타이밍 제어로 패턴 반복 최소화**
* 
* **위치 중복 방지를 위한 동적 추적 로직 구현**
  여러 AI가 동일한 좌표를 추적할 경우, 해당 좌표를 점유 상태로 인식하고 다른 경로를 재탐색하여 이동하며 충돌 및 중복 공격 최소화

### 👑 보스 전투 패턴 (Boss Battle Pattern)

* **파츠(Parts) 기반 단계적 파괴 시스템 구현**
  보스는 총 5개의 파츠(부위)로 구성되어 있으며, 각 파츠는 개별 체력(HP)과 피격 판정(에임 포인트)을 가짐
  공격 시 해당 부위에서 공격 에임(조준 표시)이 활성화되며, 플레이어는 이 에임을 조준해 피를 깎아야 파츠 파괴 단계로 진입
  
* **파츠별 파괴 진행 구조**
  · 공격 파츠: 4개 (양팔, 양 어깨)
  · 각 부위를 순차적으로 파괴하면 보스의 공격 패턴이 점차 약화
  · 모든 외곽 파츠를 파괴하면 중앙 ‘가슴 코어(Core)’ 파츠가 노출
  · 마지막 코어를 파괴하면 보스 클리어
  
* **전투 흐름 요약**
  ① 부위 공격 시 조준 에임 활성화
  ② 에임 체력 완전 소진 → 해당 부위 파괴 가능 상태로 전환
  ③ 파괴 완료 시 부위별 이펙트 및 사운드 발생
  ④ 모든 부위 파괴 후 최종 코어 파츠 등장
  ⑤ 코어 파괴 시 보스는 즉시 격파되지만, 게임은 전투 타이머가 종료될 때까지 계속 진행

**결과적으로**
단순 체력형 보스가 아닌, 파츠 단위로 전투가 구성된 단계형 보스 시스템을 구현하였으며, 각 부위 파괴 시 시각적·청각적 피드백을 제공하여 타격감과 몰입감을 강화하였습니다.

```
① 부위 조준 에임 → ② 부위 HP 감소 → ③ 파괴 에임 등장 → ④ 파츠 파괴
                ↑________________________________________↓ (반복)
                        ↓
               4개 파츠 모두 파괴
                        ↓
                   ⑤ 가슴 코어 노출 → ⑥ 코어 파괴 → ⑦ 보스 격파
※ 코어 파괴 후에도 전투 타이머 종료까지 진행
```

---

## 🎯 최종 효과 (Final Result)
* 단순한 고정 패턴이 아닌 **전략적 대응형 전투 흐름 구현**
* 다수의 적이 동시에 난입하는 **난전형 스폰 구조**로 전장의 혼돈과 몰입감 강화
* 웨이브 난이도 조절을 통해 플레이 타임 밸런스 및 긴장감 향상
* AI가 엄폐물의 형태와 전투 상황을 인식하고, 다양한 공격 준비 행동을 스스로 선택하도록 설계
* 전투의 현실감과 몰입감을 극대화하여 플레이어가 실제 전장 속에 있는 듯한 경험을 제공

---

## ⚙️ 기술 구현 (Implementation Details)

### FSM(상태 기계) 기반 AI 구조 설계

* AI는 탐색(Idle) → 엄폐(Cover) → 공격(Attack) → 피격(Damaged) → 재엄폐(Re-Cover)의 상태 전이 구조로 동작
* 각 상태는 Enum으로 정의되어 있으며, Update() 루프 내에서 현재 상태에 따라 개별 메서드를 호출하여 행동 수행

### 엄폐물 인식형 행동 로직

* 엄폐물의 Collider 태그를 통해 엄폐물 종류를 판정
* 각 엄폐물에 따라 고유한 공격 준비 행동을 수행하도록 구현
  · 엄폐 없음 : 즉시 조준 및 사격
  · 나무 뒤 : 나무에 숨었다가 좌우로 빠르게 이동하며 공격
  · 드럼통 뒤 : 앉았다가 일어나 사격, 좌우 회피, 혹은 드럼통을 넘어 접근

### 라운드·스텝 기반 스폰 매니저 구현

* `Lim_RobotEnemy_Spawn` 스크립트를 통해 라운드별·스텝별 적 위치 및 수량을 동적으로 제어

### 웨이브별 스폰 구조 설계

* `Spawn_Start()` 단일 코루틴에서 고정/이동 스폰 지점을 판별
* 별도 리스트로 수집 후, `Fix(고정)` / `UnFix(이동)` 으로 차별 처리

---

## 🧩 Tech Stack & Contact

**Language:** C#
**Engine:** Unity 2020
**Tools:** Visual Studio, PowerDirector

**Contact**

* 박준영 | Game Programmer
* Email: [soiw5386@naver.com](mailto:soiw5386@naver.com)
* Demo Video: [https://youtu.be/NQxCXdf8EL8](https://youtu.be/NQxCXdf8EL8)
